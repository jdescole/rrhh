<div>
<h2 style="text-align:center">JUSTIFICAR AUSENCIA</h2>
<br />


    <fieldset class="fieldsetCambioDomicilio">

        <p class="componenteCambioDomicilio">Agente:  <strong id="agente"></strong>. DNI:  <strong id="dni"></strong></p>
        <p class="componenteCambioDomicilio">Motivo de Ausencia: <strong id="motivo"></strong></p>
        <p class="componenteCambioDomicilio">Desde el <strong id="desde"></strong> hasta el <strong id="hasta"></strong> inclusive</p>


        <div class="">
            <label class="etiqueta_campo" for="cmb_provincia">Motivos de Justificacion: <em style="color:Red;">*</em></label>
            <select id="motivosDeJustificacion" style="width: 200px;">
                <option value="1" selected>Un motivo</option>
                 <option value="2" >2do motivo</option>
             </select>
        </div>

        <div style="text-align:center;">
            <input type="button" class="btn btn-primary" id="btnJustificar" value="Justificar" />
            <input type="button" class="btn btn-primary" id="btnCancelar" value="Cancelar" />
        </div>

    </fieldset>

</div>


<script type="text/javascript">
    var Componente = {
        start: function (ausencia, ui) {

            ui.find("#agente").text(ausencia.Persona.Apellido + ', ' + ausencia.Persona.Nombre);
            ui.find("#dni").text(ausencia.Persona.Documento);
            ui.find("#desde").text(ConversorDeFechas.deIsoAFechaEnCriollo(ausencia.Desde));
            ui.find("#hasta").text(ConversorDeFechas.deIsoAFechaEnCriollo(ausencia.Hasta));
            ui.find("#motivo").text(ausencia.Motivo);

            var justificacion = {
                    idAusencia: ausencia.Id,
                    Desde: ausencia.Desde,
                    Hasta: ausencia.Hasta
                }

            ui.find("#btnJustificar").click(function () {
                justificacion.Motivo = ui.find("#motivosDeJustificacion").val();

                Backend.guardarJustificacion(justificacion)
                .onSuccess(function (rto) {
                    if (rto == 'true') {
                        alertify.success('Ausencia Justificada exitosamente');
                    } else {
                        alertify.error('Ocurrio un error');
                    }
                        vex.close();
                    
                });

            });

            ui.find("btnCancelar").click(function () {
                //ui.close();
                vex.close();
            });

        }
    };
</script>