<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<head>
    <style type="text/css">
        #pantalla_credencial_vigente
        {
             width: 250px;
        }        
        
        #pantalla_credencial_vigente #imagen_credencial
        {
            width: 250px;
        }        
        
        #pantalla_credencial_vigente #foto_usuario
        {
            position: absolute;
            top: 81px;
            left: 37px;
            height: 112px;
            width: 112px;
        }    
        
        #pantalla_credencial_vigente #apellido
        {
            position: absolute;
            top: 207px;
            left: 32px;
            font-size: 20px;
            color: white;
        }    
        
        #pantalla_credencial_vigente #nombres
        {
            position: absolute;
            top: 235px;
            left: 32px;
            font-size: 20px;
            color: white;
        }    
        #pantalla_credencial_vigente #btn_solicitar_credencial
        {
            margin-top: 10px;
            display: inline-block;
        }
        
        #pantalla_credencial_vigente #btn_solicitar_credencial label
        {
            text-align: center;
            width: 100%;
            cursor: pointer;
        }    
    </style>
</head>
<div id=pantalla_credencial_vigente>
    <div id="credencial">
        <img id="imagen_credencial" src="../BarraMenu/credencial.png"/>
        <div id="foto_usuario"></div>
        <div id="apellido"></div>    
        <div id="nombres"></div>    
    </div>
    <a id="btn_solicitar_credencial">
        <label>¿Pérdida, robo o deterioro?</label>
        <label>Solicitá una nueva credencial</label>
    </a>
</div>
<script type="text/javascript">
    console.log("credencial vigente cargada");
    vex.defaultOptions.className = 'vex-theme-os';
    vex.close();
    vex.open({
        afterOpen: function ($vexContent) {

            var ui = $("#plantillas_barra_menu #pantalla_credencial_vigente").clone();

            Backend.GetUsuarioLogueado().onSuccess(function (usuario) {
                ui.find("#apellido").text(usuario.Owner.Apellido);
                ui.find("#nombres").text(usuario.Owner.Nombre);
                ui.find("#btn_solicitar_credencial").click(function () {
                    window.location.href = window.location.origin + '/Portal/PedidoCredencial.aspx'
                });
                var img = new VistaThumbnail({
                    id: usuario.Owner.IdImagen,
                    contenedor: ui.find("#foto_usuario")
                });
                $vexContent.css("width", "300px");
                $vexContent.append(ui);
                ui.show();
            });
            return ui;
        },
        css: {
            'padding-top': "4%",
            'padding-bottom': "0%"
        }
    });
</script>
